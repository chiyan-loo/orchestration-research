user_input,reference_contexts,reference,synthesizer_name
What contributions has Han Zhou made to the field of multi-agent systems?,"['5 2 0 2 b e F 4 ] G L . s c [ 1 v 3 3 5 2 0 . 2 0 5 2 : v i X r a Multi-Agent Design: Optimizing Agents with Better Prompts and Topologies Han Zhou1 2 *, Xingchen Wan1, Ruoxi Sun1, Hamid Palangi1, Shariq Iqbal1, Ivan Vulić1 2, Anna Korhonen2 and Sercan Ö. Arık1 1Google, 2University of Cambridge Large language models, employed as multiple agents that interact and collaborate with each other, have excelled at solving complex tasks. The agents are programmed with prompts that declare their functionality, along with the topologies that orchestrate interactions across agents. Designing prompts and topologies for multi-agent systems (MAS) is inherently complex. To automate the entire design process, we first conduct an in-depth analysis of the design space aiming to understand the factors behind building effective MAS. We reveal that prompts together with topologies play critical roles in enabling more effective MAS design. Based on the insights, we propose Multi-Agent System Search (Mass), a MAS optimization framework that efficiently exploits the complex MAS design space by interleaving its optimization stages, from local to global, from prompts to topologies, over three stages: 1) block-level (local) prompt optimization; 2) workflow topology optimization; 3) workflow-level (global) prompt optimization, where each stage is conditioned on the iteratively optimized prompts/topologies from former stages. We show that Mass-optimized multi-agent systems outperform a spectrum of existing alternatives by a substantial margin. Based on the Mass-found systems, we finally propose design principles behind building effective multi-agent systems.']",Han Zhou is one of the authors of a study that focuses on optimizing multi-agent systems (MAS) through better prompts and topologies. The research reveals that prompts and topologies are critical in enabling effective MAS design and proposes a framework called Multi-Agent System Search (Mass) to optimize the design process.,single_hop_specifc_query_synthesizer
How do Kojima et al. contribute to the understanding of multi-agent systems and their optimization?,"['1. Introduction Exemplar Topology Optimizer debate aggregate Instruction Prompt Optimization Space customMASS re\x00ectMulti-Agent Design Space <ex_1><ex_2>...<ins> Optimized topology <ex_1><ex_2>...<ins> summarizetool-use Optimized prompt for each agent typeOptimizedMAS design <ex_1><ex_2>...<ins> Large language models (LLMs) have showcased extraordinary capabilities in understanding, rea- soning, and generating coherent responses based on user prompts, revolutionizing a wide range of applications (Kojima et al., 2022; Ouyang et al., 2022). LLM-based agents enhance us- ability by autonomously handling complex tasks across diverse domains, including code generation and debugging (Jimenez et al., 2023), retrieval- augmented generation (Singh et al., 2025; Wang et al., 2024a), data analysis (Guo et al., 2024; Hu et al., 2024b), and interactive decision-making (Li et al., 2025; Su et al., 2025). These agents are typically programmed with prompts that reinforce them to interact with the environment, utilizing available tools, and approach their objectives over multiple turns (Yao et al., 2023). Beyond individ- ual agents, LLMs can be orchestrated within com- plex topologies that coordinate multiple agents toward a shared objective. This type of multi-agent system (MAS) typically outperforms its single- agent counterpart by involving more diverse agentic perspectives or role profiles, such as agents as verifiers (Shinn et al., 2024) and multi-agent debate (Qian et al., 2024; Wang et al., 2024b). Figure 1 | Proposed Multi-Agent System Search (Mass) framework discovers effective multi- agent system designs (with both optimized topol- ogy and optimized prompts, right) via interleaved prompt optimization and topology optimization in a customizable multi-agent design space (key components illustrated on the left). Corresponding author(s): hzhouml@google.com, soarik@google.com * This work was done while Han Zhou was a Student Researcher at Google Cloud AI Research. Multi-Agent Design: Optimizing Agents with Better Prompts and Topologies However, designing effective MAS for new domains often proves to be challenging. First, the single agent might suffer from prompt sensitivity (Verma et al., 2024), where simple modifications in the prompt can already exert significant but unexpected degradation of performance (Liu et al., 2024a; Zhou et al., 2024b). In MAS, when sensitive agents are cascaded, the compounding effect due to prompt sensitivity may be amplified. Together with the prompt design, crafting an effective topology might demand a substantial amount of manual experimentation, based on trial and error. The problem complexity is exacerbated by the overall combinatorial search space, over not only the unbounded space of prompt design but also the design decisions of what agent to integrate into the topology. Although recent research has explored automating various aspects of agentic designs, there is still a gap in understanding of what matters most regarding improved MAS performance. For example, DSPy (Khattab et al., 2024) automates the process of designing exemplars for improved prompt programming. Li et al. (2024a) proposes to optimize MAS by scaling up the number of agents in majority voting. ADAS (Hu et al., 2024a) programs new topologies expressed in code via an LLM-based meta-agent. AFlow (Zhang et al., 2024b) searches better topologies using Monte Carlo Tree Search within a set of predefined operators. However, the interplay between multiple design spaces, including prompts and topologies, remains unclear. In this paper, we first conduct in-depth analyses of common design spaces in MAS, examining the influence of various aspects such as optimizing the prompts, scaling the number of agents, and involving different types of topologies. Our analyses reveal that prompts frequently form an influential design component that yields strong-performing MAS, and influential topologies only represent a small fraction of the full search space. Based on these insights, we aim to distill the essence of influential MAS components into a pruned search space, thereby lowering the complexity of the overall search process. We propose Multi-Agent System Search (Mass), a novel multi-stage optimization framework that automates the optimization for MAS over an efficient search space. Mass integrates a plug- and-play prompt optimizer and workflow optimizer over a configurable topology space. It overcomes the complexity of joint optimization on MAS by interleaving the optimization stages, from local to global, from prompts to topologies, over three stages: 1) block-level (local) prompt ‘warm-up’ for each topology block; 2) workflow topology optimization in a pruned set of topology space; 3) workflow-level (global) prompt optimization given the best-found topology. By optimizing over the identified influential components, Mass yields optimized MAS that achieves state-of-the-art performance, outperforming existing manually-crafted MAS baselines and automatically-generated alternatives, by a substantial margin, demonstrated across an extensive selection of tasks, including reasoning, multi-hop understanding, and code generation. Based on the strongest MAS found by Mass, we provide further insights and guidelines behind building effective MAS. Overall, our contributions can be summarized as follows: 1) we provide an in-depth analysis of the design factors that influence the performance of LLM-based MAS, highlighting the importance of prompts and identifying the influential topologies; 2) we propose Mass, a novel multi-stage optimizer that automates the MAS design by interleaving the optimization of prompts and topologies in an influential search space; 3) Mass shows significant performance improvement on various evaluation benchmarks, delivering guidelines for building effective multi-agent systems for the future.']","Kojima et al. (2022) contribute to the understanding of multi-agent systems (MAS) by highlighting the extraordinary capabilities of large language models (LLMs) in enhancing usability through autonomous handling of complex tasks across diverse domains. They emphasize the importance of optimizing prompts and topologies in MAS design, revealing that prompts are a significant design component that influences performance. Their work proposes the Multi-Agent System Search (Mass) framework, which automates the optimization process for MAS by interleaving the optimization of prompts and topologies, ultimately achieving state-of-the-art performance across various tasks.",single_hop_specifc_query_synthesizer
What is the significance of prompt design in multi-agent systems for 2024?,"['2.1. Block-level: Prompt Design for Agents At the block level, the primary “optimizable com- ponent” that significantly influences downstream performance is the prompt, which defines the role of the agent (e.g., “You are an expert in re- flecting on errors...”), provides additional instruc- tions to shape its behavior (e.g., “You should think step by step...”) and optionally, contains few-shot demonstrations (in-context examples) to guide the agent’s responses (Wan et al., 2024, 2025). For instance, a state-of-the-art prompt optimizer searches both instructions and few-shot demon- strations, where demonstrations are bootstrapped from the model’s own, correct predictions on the validation set based on a validation metric. Con- ditioned on the demonstrations, the prompt op- timizer then proposes a few candidates for the instruction with a dataset summary or various hints to improve candidate diversity (Opsahl-Ong et al., 2024). The instructions and demonstrations are then jointly optimized. 76 74 78 82 103 Tokens 84Accuracy (%) 80 Debate Prompt->SC Prompting Reflect SC Figure 2 | Accuracy vs. the total token counts for prompt-optimized agents per question on MATH by Gemini 1.5 Pro compared to scaling agents with self-consistency (SC), self-refine (reflect), and multi-agent debate (debate) only. The error bar indicates 1 standard deviation. We show that by utilizing more compute, better accuracy can be obtained via more effective prompting. Although it is well known that LLMs are sensitive to prompts (Verma et al., 2024; Zhou et al., 2024a), applying automatic prompt optimization (APO) techniques to MAS is rather non-trivial. Unlike single-turn tasks where APO can be easily performed by treating prompts as optimizable variables and performance over a validation set as the target. In MAS, APO becomes more complex due to the interdependence across agents (e.g., the output of one agent may be the input of another agent in a cascade with ground-truth responses for intermediate outputs not being available) and exponentially increasing complexity for combinatorial optimization with more number of agents 𝑛 involved; The reward signals also become more sparse when 𝑛 increases, preventing us for implementing APO directly on MAS in any manageable budget; as such, many prior works (Xia et al., 2024; Zhang et al., 2024f) in MAS still primarily use handcrafted prompts instead of including the prompts as optimizable components in the MAS design. To systematically understand the influence of prompt design in MAS, we specifically and quantita- tively analyze the effect of prompt optimization and compare its effectiveness to other operations common in MAS literature, such as scaling with more agents but with default prompts. We conduct (1) 3 Multi-Agent Design: Optimizing Agents with Better Prompts and Topologies APO on a chain-of-thought (Kojima et al., 2022) agent with both instruction optimization and 1-shot exemplar optimization via MIPRO (Opsahl-Ong et al., 2024), and fairly compare the total inference to- ken cost with self-consistency (Kojima et al., 2022), self-refine (Madaan et al., 2024), and multi-agent debate (Du et al., 2024), where the specifications are provided in App. §B. In Fig. 2, prompting, which equips agents with more informative instructions and exemplars, demonstrates significant advantages in its token-effectiveness over other building blocks. Furthermore, by applying self-consistency on top of the prompt-optimized agent, we observe an improved scaling performance on the token cost, whereas standard approaches in scaling the number of agents (e.g. SC, or Reflect) saturate much earlier. This empirical observation sheds light on the importance of prompting while providing early evidence for designing effective MAS – optimize agents locally before scaling their topology.']","The significance of prompt design in multi-agent systems (MAS) for 2024 lies in its ability to optimize agent performance. The prompt serves as the primary optimizable component that influences downstream performance by defining the agent's role and providing instructions to shape its behavior. Effective prompting can lead to better accuracy and token-effectiveness compared to traditional methods, especially when scaling agents. The analysis shows that optimizing prompts can significantly enhance the performance of agents, making it a crucial aspect of MAS design in 2024.",single_hop_specifc_query_synthesizer
"What were the key factors contributing to Meta's significant stock gain in 2024, and how did this performance compare to the overall stock market trends during the same year?","['<1-hop>\n\nConclusion In summary, 2024 was a banner year for stocks, led overwhelmingly by the technology sector. The S&P 500\'s roughly 25% gain for the year - coming on the heels of a similar advance in 2023 - was fueled by spectacular performances from both mega-cap titans like Apple, Alphabet, and Meta and high-flying newer companies riding the tech innovation wave. Market darlings in AI, chips, and software posted eye-popping returns, driving major indices to record or near-record highs. This surge in stock prices brought with it significantly increased valuations. By year-end, many leading stocks were trading at rich multiples, pricing in a lot of optimism for future growth. The exuberance of 2024 did create a ""frothy"" sentiment environment, as analysts at Schwab noted , meaning investors had become very bullish and perhaps complacent. This backdrop raised some concern that volatility could return if the anticipated growth failed to materialize or if macroeconomic factors turned unfriendly. As 2025 began, market participants were balancing the excitement about technology-driven growth against the reality of elevated price levels. The strong 2024 stock performance undoubtedly rewarded investors, but it also set a high bar for future earnings and innovation to justify those prices. In essence, 2024\'s legacy is that of a tech-dominated rally that delivered substantial wealth gains, while also concentrating market leadership and stretching some valuation metrics. Investors and analysts heading into 2025 remained watchful: optimistic that the trends propelling 2024\'s gains (such as AI adoption and economic resilience) would continue, yet cautious of potential corrections given how far and fast many stock prices climbed. 2024 will be remembered as a year when Wall Street fully embraced the promise of next-generation technology - a year of exceptional stock market performance, underpinned by both real improvements in corporate fortunes and a robust appetite for risk in the face of those opportunities.""', '<2-hop>\n\nStock Market Performance in 2024 U.S. Market Overview The year 2024 was a remarkably strong one for equities, with the U.S. stock market extending the robust gains seen in the prior year. The benchmark S&P 500 index delivered roughly a 25% total return for 2024 (around +23% in price terms) . This marked the second consecutive year of over 20% returns for the S&P 500 - a feat not observed since the late 1990s . The tech-heavy Nasdaq Composite outpaced the broader market, jumping nearly 29% for the year . In contrast, smaller-cap stocks had more modest performance: the S&P 500 Equal-Weight index and the Russell 2000 (small-cap benchmark) each rose about 10-11% in 2024 . The disparity underscored that 2024\'s rally was not evenly distributed across the market. A key theme was the dominance of mega-cap technology stocks. A group of seven powerhouse companies often dubbed the ""Magnificent 7"" - Apple, Microsoft, Alphabet (Google), Amazon, Meta (Facebook), Nvidia, and Tesla - collectively surged by roughly 64-67% on average in 2024 . These few firms contributed disproportionately to the S&P 500\'s gains. In fact, they accounted for over half of the index\'s return for the year (about 54% of S&P 500 performance) . By year\'s end, many of these leaders had reached record-high share prices amid investor enthusiasm for transformative technologies like artificial intelligence (AI). Meanwhile, more traditional and value-oriented sectors lagged behind, and many diversified portfolios trailed the S&P\'s 25% gain as a result . Overall, 2024\'s market climate was one of bullish sentiment driven by technology and growth stocks, albeit with narrow market breadth focused on the largest companies. but investors largely looked past those losses in 2024, focusing instead on the core business rebound and the exciting potential for new AI-driven features. Meta\'s 72% stock gain underscored a broader trend in 2024: a return to favor for online advertising and social media companies, especially those that managed to significantly boost their earnings and cash flow. Tesla, Inc. (TSLA) - 2024 Performance Tesla\'s stock experienced a roller-coaster year in 2024, but ultimately delivered strong gains. The electric vehicle leader\'s share price ended the year up approximately 63% . This sizable annual rise belies the volatility Tesla faced during the year: in the first half of 2024, Tesla\'s stock actually declined amid concerns about slowing EV demand and tighter profit margins. By mid-year, shares were down substantially from their late-2023 levels, as the company cut vehicle prices to stoke demand (pressuring its margins). However, the trend reversed dramatically in the final months of 2024. Virtually all of Tesla\'s yearly gains came in the fourth quarter, with the stock skyrocketing after the U.S. presidential election in November 2024 . The election outcome (which resulted in a more business-friendly administration) bolstered market sentiment, particularly for high-growth and tech names. Tesla\'s shares rallied sharply on this wave of optimism, and on hopes that economic conditions in 2025 would allow for renewed demand and pricing power in the EV market. By December 2024, Tesla\'s stock was trading near record highs. It briefly touched an all-time closing high of around $480 per share in mid-December macrotrends.net , doubling from its lows earlier in the year. At its year-end price (in the low $400s), Tesla\'s market capitalization was in excess of $1.2 trillion - firmly cementing its status as one of the most valuable automakers in history. However, Tesla\'s fundamentals in 2024 did not rise in tandem with its stock price. In fact, the company\'s earnings per share for the full year 2024 fell by over 50% compared to 2023 macrotrends.net . Higher costs and the impact of vehicle price reductions meant Tesla\'s profit margins and net income declined even as unit sales grew. The result was that Tesla\'s valuation became even more stretched: by the end of 2024, the stock was trading at well over 100 times its trailing earnings (a rough estimate, as the company\'s EPS for the year was around $2) - an extremely high multiple macrotrends.net . This disconnect between Tesla\'s soaring share price and its shrinking earnings was noted by analysts as a risk factor. Nonetheless, 2024 demonstrated the market\'s willingness to bet on Tesla\'s long-term growth story (in areas like autonomous driving, energy storage, and global EV adoption), even if in the short term the financial results did not justify the exuberant stock price. Tesla\'s 63% gain was a significant contributor to the S&P 500\'s performance and exemplified the late-year risk-on fervor that characterized the market\'s finish to 2024.']","Meta's stock gain of 72% in 2024 was driven by a broader trend of returning favor for online advertising and social media companies, particularly those that significantly boosted their earnings and cash flow. This performance was part of a remarkably strong year for the U.S. stock market, where the S&P 500 delivered a total return of roughly 25%, largely fueled by the technology sector. The dominance of mega-cap technology stocks, including Meta, was a key theme, as these companies collectively surged by approximately 64-67% on average. Meta's performance contributed disproportionately to the S&P 500's gains, highlighting the narrow market breadth focused on the largest companies during a year characterized by bullish sentiment and excitement around transformative technologies like artificial intelligence.",multi_hop_specific_query_synthesizer
"How do the findings of Madaan et al. regarding self-refine compare to the insights from Kandasamy et al. on the importance of prompt optimization in multi-agent systems, particularly in terms of their impact on performance and the design of search spaces?","[""<1-hop>\n\n2.2. Workflow-level Search Space Design CoT SC Deb. 62 66 64 70Performance (%) 68 SC Base+7%-15%+6%+10%LiveCodeBench Base+1%-0%+3%-2%HotpotQA CoT Ref. Sum.Method 80 70 Deb. Ref. 60 Exe.Method At the workflow level, the primary focus is on orchestrating agents to achieve the best perfor- mance effectively. As a relatively new concept specific to MAS, topology optimization has re- cently garnered significant attention (Li et al., 2024c; Zhang et al., 2024b). However, while much of the existing research emphasizes search methods—such as discovering the most efficient and effective way to identify the optimal config- uration—there has been less focus on the design of search spaces, which determines the perime- ter and the scope of any search algorithm. This imbalance draws a parallel to the historical devel- opment of neural architecture search (NAS) (White et al., 2023). Initially, the field concentrated on sophisticated search methods, such as Bayesian optimization (Kandasamy et al., 2018; Ru et al., 2021) and differentiable search (Liu et al., 2018). Follow-up works have highlighted the often- overlooked importance of search space design, arguing that it can be equally, if not more, critical (Wan et al., 2022; Zhou et al., 2023, 2024c). Inspired by this insight, we hypothesize that manually crafted topologies might be sub-optimal, and automatic topology optimization (potentially framed as a rigorous optimization problem) can play a similarly pivotal role via judiciously designing search space for MAS. To achieve so, we first define an expressive search space, similar to prior works, that consists of the connections between the following building blocks: Figure 3 | The performance of different topologies with Gemini 1.5 Pro compared to the base agent with each topology being optimized with APO, where Sum. (Summarize) and Exe. (Executor) are task-specific topologies as illustrated in Fig. 4. We observe that not all topologies have a positive influence on the MAS design. Aggregate: Agents can collaborate in parallel with diversified predictions, which is then followed by an aggregation operator that obtains the most consistent prediction. The aggregate block can be parameterized by 𝑁𝑎 agents acting in parallel. Majority vote (Li et al., 2024a) and self-consistency (Chen et al., 2024c) sits within this topology. Reflect: Agents can act as verifiers, providing critics and improvement suggestions based on for- mer predictions. The feedback is then fed into the predictor or the reflector itself for an iterative improvement. Similarly, reflect can be parameterized by 𝑁𝑟 that defines the number of rounds for self-reflection. The self-refine (Madaan et al., 2024) and Reflexion (Shinn et al., 2024) represent this block. Debate: Agents in debate can elicit more truthful predictions than single-agent prediction (Du et al., 2024; Liang et al., 2024), where each debating agent would collect opinions from all other agents 4 Multi-Agent Design: Optimizing Agents with Better Prompts and Topologies </> P A P Summarize S </> </>PredictorAggregate P P ( , 75%) Evaluate on validation task / split Prompt Optimization 1Block-level </>Long inputs </> </> </> </> R , 63%)( . . .Proposed candidateOptimizer: Store evaluations andpropose new work\x00owValidation metric 2Work\x00ow </> P </>Self-re\x00ect </> </> </>Best topology from Step 2 </> Topology Optimization P T </>: Optimizable promptsTool-use D </> </> </> Instruction optimization DemooptimizationWork\x00ow-level Prompt Optimization 3Let's think step bystep → (Examplenew prompt)<example_1><example_2>... Evaluate on validation task / split Validation metric </>: Optimizable prompts </> P A </> </> D D P </> </> </> </> </> </> </> P </> </> Multi-agent debate Figure 4 | Illustration of the Mass framework with its search space and the multi-stage optimization. The search space combines both prompts (Instruction, Demo) and configurable agentic building blocks (Aggregate, Reflect, Debate, Summarize, and Tool-use). 1) Block-level Prompt Opti- mization: we conduct block-level prompt optimization for each agentic module individually (denoted by </>); 2) Workflow Topology Optimization: conditioned on the best prompts found in Stage 1 on each agent block, Mass samples valid configurations from an influence-weighted design space while fusing the prompts of each building block from Stage 1; 3) Workflow-level Prompt Optimization: conditioned on the best workflow found in the Stage 2, we again conduct workflow-level prompt optimization on the best-found MAS (topologies visualized for illustration only). and provides an updated response. This topology would involve a mixture of agents, and 𝑁𝑑 defines the number of rounds for debating. Custom Agents: While the former three forms of agents represent the vast majority of agent topologies constructed as multiple parallel, serial, and mixture of agents, more versatile definitions of agents can be inserted into the MAS design space. For example, for task-specific use cases, we introduce an agent as summarize to improve the long-context capability in the customizable design space. • Tool-use: Building towards an effective MAS, enabling agents to leverage tools to access external information is critical for system performance, such as using retriever for RAG (Lewis et al., 2020) and executor with test cases in coding (Chen et al., 2024d). We introduce tool-use as an optimizable binary ‘insertion’ decision 𝑁𝑇 ∈ {0,1}. To understand the influence of individual topology, we report the performance of various topologies in Fig. 3. It is noticeable that not all topologies are beneficial to MAS design, whereas positively influenced topologies only represent a small fraction of the overall set, such that, in HotpotQA (Yang et al., 2018), only debate brings 3% gain while others fail to improve or even degrade systematic performance. We again observe similar trends in the test-output-prediction subtask of LiveCodeBench (Jain et al., 2024). It highlights the importance of searching in the influential set of search space, whereas including decremental building blocks may not only result in higher search complexity but also degrade the performance."", '<2-hop>\n\n2.1. Block-level: Prompt Design for Agents At the block level, the primary “optimizable com- ponent” that significantly influences downstream performance is the prompt, which defines the role of the agent (e.g., “You are an expert in re- flecting on errors...”), provides additional instruc- tions to shape its behavior (e.g., “You should think step by step...”) and optionally, contains few-shot demonstrations (in-context examples) to guide the agent’s responses (Wan et al., 2024, 2025). For instance, a state-of-the-art prompt optimizer searches both instructions and few-shot demon- strations, where demonstrations are bootstrapped from the model’s own, correct predictions on the validation set based on a validation metric. Con- ditioned on the demonstrations, the prompt op- timizer then proposes a few candidates for the instruction with a dataset summary or various hints to improve candidate diversity (Opsahl-Ong et al., 2024). The instructions and demonstrations are then jointly optimized. 76 74 78 82 103 Tokens 84Accuracy (%) 80 Debate Prompt->SC Prompting Reflect SC Figure 2 | Accuracy vs. the total token counts for prompt-optimized agents per question on MATH by Gemini 1.5 Pro compared to scaling agents with self-consistency (SC), self-refine (reflect), and multi-agent debate (debate) only. The error bar indicates 1 standard deviation. We show that by utilizing more compute, better accuracy can be obtained via more effective prompting. Although it is well known that LLMs are sensitive to prompts (Verma et al., 2024; Zhou et al., 2024a), applying automatic prompt optimization (APO) techniques to MAS is rather non-trivial. Unlike single-turn tasks where APO can be easily performed by treating prompts as optimizable variables and performance over a validation set as the target. In MAS, APO becomes more complex due to the interdependence across agents (e.g., the output of one agent may be the input of another agent in a cascade with ground-truth responses for intermediate outputs not being available) and exponentially increasing complexity for combinatorial optimization with more number of agents 𝑛 involved; The reward signals also become more sparse when 𝑛 increases, preventing us for implementing APO directly on MAS in any manageable budget; as such, many prior works (Xia et al., 2024; Zhang et al., 2024f) in MAS still primarily use handcrafted prompts instead of including the prompts as optimizable components in the MAS design. To systematically understand the influence of prompt design in MAS, we specifically and quantita- tively analyze the effect of prompt optimization and compare its effectiveness to other operations common in MAS literature, such as scaling with more agents but with default prompts. We conduct (1) 3 Multi-Agent Design: Optimizing Agents with Better Prompts and Topologies APO on a chain-of-thought (Kojima et al., 2022) agent with both instruction optimization and 1-shot exemplar optimization via MIPRO (Opsahl-Ong et al., 2024), and fairly compare the total inference to- ken cost with self-consistency (Kojima et al., 2022), self-refine (Madaan et al., 2024), and multi-agent debate (Du et al., 2024), where the specifications are provided in App. §B. In Fig. 2, prompting, which equips agents with more informative instructions and exemplars, demonstrates significant advantages in its token-effectiveness over other building blocks. Furthermore, by applying self-consistency on top of the prompt-optimized agent, we observe an improved scaling performance on the token cost, whereas standard approaches in scaling the number of agents (e.g. SC, or Reflect) saturate much earlier. This empirical observation sheds light on the importance of prompting while providing early evidence for designing effective MAS – optimize agents locally before scaling their topology.']","Madaan et al. emphasize the significance of self-refine in enhancing the performance of agents within multi-agent systems (MAS), suggesting that iterative feedback and improvement can lead to more accurate predictions. This approach aligns with the findings of Kandasamy et al., who highlight the critical role of prompt optimization in shaping agent behavior and improving downstream performance. Both studies underscore the necessity of optimizing components—whether through self-reflection or prompt design—to achieve better outcomes in MAS. While Madaan et al. focus on the iterative nature of self-refine, Kandasamy et al. stress the foundational importance of well-designed prompts, indicating that effective prompt optimization can lead to significant performance gains, thereby influencing the overall design of search spaces in MAS.",multi_hop_specific_query_synthesizer
What was Amazon's stock performance in 2024 and how did it compare to other major tech stocks like Apple and Alphabet?,"['<1-hop>\n\nStock Market Performance in 2024 U.S. Market Overview The year 2024 was a remarkably strong one for equities, with the U.S. stock market extending the robust gains seen in the prior year. The benchmark S&P 500 index delivered roughly a 25% total return for 2024 (around +23% in price terms) . This marked the second consecutive year of over 20% returns for the S&P 500 - a feat not observed since the late 1990s . The tech-heavy Nasdaq Composite outpaced the broader market, jumping nearly 29% for the year . In contrast, smaller-cap stocks had more modest performance: the S&P 500 Equal-Weight index and the Russell 2000 (small-cap benchmark) each rose about 10-11% in 2024 . The disparity underscored that 2024\'s rally was not evenly distributed across the market. A key theme was the dominance of mega-cap technology stocks. A group of seven powerhouse companies often dubbed the ""Magnificent 7"" - Apple, Microsoft, Alphabet (Google), Amazon, Meta (Facebook), Nvidia, and Tesla - collectively surged by roughly 64-67% on average in 2024 . These few firms contributed disproportionately to the S&P 500\'s gains. In fact, they accounted for over half of the index\'s return for the year (about 54% of S&P 500 performance) . By year\'s end, many of these leaders had reached record-high share prices amid investor enthusiasm for transformative technologies like artificial intelligence (AI). Meanwhile, more traditional and value-oriented sectors lagged behind, and many diversified portfolios trailed the S&P\'s 25% gain as a result . Overall, 2024\'s market climate was one of bullish sentiment driven by technology and growth stocks, albeit with narrow market breadth focused on the largest companies. but investors largely looked past those losses in 2024, focusing instead on the core business rebound and the exciting potential for new AI-driven features. Meta\'s 72% stock gain underscored a broader trend in 2024: a return to favor for online advertising and social media companies, especially those that managed to significantly boost their earnings and cash flow. Tesla, Inc. (TSLA) - 2024 Performance Tesla\'s stock experienced a roller-coaster year in 2024, but ultimately delivered strong gains. The electric vehicle leader\'s share price ended the year up approximately 63% . This sizable annual rise belies the volatility Tesla faced during the year: in the first half of 2024, Tesla\'s stock actually declined amid concerns about slowing EV demand and tighter profit margins. By mid-year, shares were down substantially from their late-2023 levels, as the company cut vehicle prices to stoke demand (pressuring its margins). However, the trend reversed dramatically in the final months of 2024. Virtually all of Tesla\'s yearly gains came in the fourth quarter, with the stock skyrocketing after the U.S. presidential election in November 2024 . The election outcome (which resulted in a more business-friendly administration) bolstered market sentiment, particularly for high-growth and tech names. Tesla\'s shares rallied sharply on this wave of optimism, and on hopes that economic conditions in 2025 would allow for renewed demand and pricing power in the EV market. By December 2024, Tesla\'s stock was trading near record highs. It briefly touched an all-time closing high of around $480 per share in mid-December macrotrends.net , doubling from its lows earlier in the year. At its year-end price (in the low $400s), Tesla\'s market capitalization was in excess of $1.2 trillion - firmly cementing its status as one of the most valuable automakers in history. However, Tesla\'s fundamentals in 2024 did not rise in tandem with its stock price. In fact, the company\'s earnings per share for the full year 2024 fell by over 50% compared to 2023 macrotrends.net . Higher costs and the impact of vehicle price reductions meant Tesla\'s profit margins and net income declined even as unit sales grew. The result was that Tesla\'s valuation became even more stretched: by the end of 2024, the stock was trading at well over 100 times its trailing earnings (a rough estimate, as the company\'s EPS for the year was around $2) - an extremely high multiple macrotrends.net . This disconnect between Tesla\'s soaring share price and its shrinking earnings was noted by analysts as a risk factor. Nonetheless, 2024 demonstrated the market\'s willingness to bet on Tesla\'s long-term growth story (in areas like autonomous driving, energy storage, and global EV adoption), even if in the short term the financial results did not justify the exuberant stock price. Tesla\'s 63% gain was a significant contributor to the S&P 500\'s performance and exemplified the late-year risk-on fervor that characterized the market\'s finish to 2024.', '<2-hop>\n\nMajor Tech Stock Performances Apple Inc. (AAPL) - 2024 Performance Apple\'s stock had an outstanding 2024, climbing approximately 36% over the course of the year . The iPhone maker\'s share price reached new all-time highs, ending the year around $252 per share (up from about $185 at the start of 2024). This rally lifted Apple\'s market capitalization to nearly $4 trillion by year-end , reaffirming its status as the world\'s most valuable publicly traded company. Apple\'s gains were driven by solid demand for its products - the company saw successful launches of the iPhone 15 series and other hardware updates - as well as continued growth in high-margin services. The company also expanded its presence in emerging markets, fueling investor optimism about future growth. Despite only moderate earnings increases in 2024 (Apple\'s net income grew in the high single digits), the stock\'s rapid appreciation led to an expansion in valuation. By the end of 2024 Apple was trading at about 40 times its trailing earnings macrotrends.net , well above its historical average P/E in the mid-20s. This elevated P/E ratio reflected substantial optimism from investors and a willingness to pay a premium for Apple\'s steady cash flows and ecosystem advantages. In short, Apple\'s combination of robust stock price growth and relatively modest earnings growth pushed its valuation to a lofty level going into 2025. Alphabet (Google) (GOOGL) - 2024 Performance Alphabet Inc., the parent of Google, also delivered strong results for shareholders in 2024. Alphabet\'s stock price rose by nearly 40% over the year , closing around $189 per share - close to record highs for the company. This performance added roughly $600 billion in market value, pushing Alphabet\'s market capitalization above $2 trillion by December 2024. Key to this rally was Alphabet\'s core strength in digital advertising (still a major revenue driver) and its strides in artificial intelligence. The company demonstrated innovation in AI, including the introduction of its Gemini 2.0 AI model and breakthroughs in quantum computing chips , which reassured investors that Google ""still has its mojo"" in the evolving tech landscape. Google\'s cloud computing division also continued to grow, contributing to the overall positive sentiment . Alphabet\'s financial results helped justify its stock gains. The company\'s revenues and earnings saw healthy growth in 2024, thanks to a rebound in ad spending and efficiency efforts. By year-end, Alphabet\'s valuation remained relatively reasonable compared to its peers - about 23× trailing earnings macrotrends.net . This was roughly unchanged from its P/E a year prior, indicating that Alphabet\'s ~36% stock price increase was largely matched by an increase in its earnings over the same period. In summary, Google\'s parent company enjoyed a robust 2024 rally built on both improved fundamentals and investor excitement about its leadership in AI and technology innovation. Amazon.com Inc. (AMZN) - 2024 Performance Amazon\'s stock staged an impressive rebound in 2024, advancing roughly 48% for the year . The e-commerce and cloud computing giant saw its share price rise from about $152 at the end of 2023 to around $219 by December 2024 macrotrends.net . This surge added on the order of $600-700 billion to Amazon\'s market capitalization, bringing it back into the vicinity of $1.7-$1.8 trillion. Multiple factors drove Amazon\'s strong performance. On the retail side, demand remained solid - Amazon\'s online shopping volumes and Prime membership base continued to grow, even as consumers navigated a post-pandemic environment. Meanwhile, Amazon Web Services (AWS), the company\'s cloud division, maintained its leadership and high profitability in the cloud computing market, benefiting from the digital transformation and AI needs of businesses. These dual engines (e-commerce and cloud) reassured investors of Amazon\'s long-term growth trajectory. Crucially, Amazon\'s earnings improved significantly in 2024 after a slump in 2022-2023. Cost cutting and efficiency measures, along with revenue growth, led to a sharp rise in operating income. By the end of 2024, Amazon\'s trailing price-to-earnings ratio had declined to about 40 macrotrends.net down from a very elevated ~52 P/E at the end of 2023 - reflecting the fact that earnings rose faster than the stock price. Even at 40× earnings, Amazon\'s valuation was still on the higher side compared to the broader market, but investors seemed comfortable paying a premium for its dominant market positions. Overall, 2024 marked a return to form for Amazon\'s stock, as the company regained its footing with investors and recouped a substantial portion of the market value it had lost in the prior year. Meta Platforms (Facebook) (META) - 2024 Performance Meta Platforms, the parent company of Facebook, Instagram, and WhatsApp, was one of 2024\'s standout performers. Meta\'s stock price skyrocketed about 72% during the year , making it one of the best-performing large-cap stocks. The share price surged from roughly $352 at the end of 2023 to around $585 by December 2024 macrotrends.net . In the process, Meta\'s market capitalization climbed back above the $1 trillion threshold - a remarkable turnaround after the company\'s challenges just two years prior. Several catalysts powered Meta\'s rally. The company\'s core advertising business recovered strongly, with 2024 advertising revenue reaching roughly $160 billion, about 22% higher than the prior year . Meta\'s focus on cost discipline and efficiency (following its ""Year of Efficiency"" initiatives) led to dramatically improved profitability: full-year earnings jumped approximately 60% year-over-year . These better-than-expected results, combined with enthusiasm for Meta\'s investments in artificial intelligence (to improve content delivery and ad targeting), boosted investor confidence. By year\'s end, Meta\'s valuation remained quite reasonable despite the stock nearly doubling. Thanks to its surge in earnings, Meta\'s trailing P/E ratio was only in the mid-20s at the end of 2024 macrotrends.net only slightly higher than its P/E a year prior and generally in line with the broader market. In other words, Meta\'s huge stock price increase was underpinned by equally impressive earnings growth, keeping its valuation multiples in check. This combination of value and growth made Meta an outlier among mega-cap tech stocks. The company did continue heavy spending on its metaverse and virtual reality initiatives (Reality Labs),']","Amazon's stock staged an impressive rebound in 2024, advancing roughly 48% for the year, with its share price rising from about $152 at the end of 2023 to around $219 by December 2024. This surge added approximately $600-700 billion to Amazon's market capitalization, bringing it back into the vicinity of $1.7-$1.8 trillion. In comparison, Apple Inc. saw its stock climb approximately 36% over the same period, reaching new all-time highs, while Alphabet's stock price rose by nearly 40%. Both Apple and Alphabet's performances were driven by strong fundamentals and investor excitement, but Amazon's growth was particularly notable as it regained investor confidence after a slump in previous years.",multi_hop_specific_query_synthesizer
